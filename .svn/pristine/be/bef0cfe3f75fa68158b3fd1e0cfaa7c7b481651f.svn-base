<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
	<select id="loginCheck" resultType="String">
		SELECT mg_email as adminName FROM manager
		WHERE mg_login_id = #{adminId} AND mg_login_pwd = #{adminPw}
	</select>
	
	<select id="viewMember" resultType="com.minwon.vo.LoginVO">
		SELECT
			mg_email as adminEmail,
			mg_login_id as adminId,
			mg_login_pwd as adminPw,
			mg_ip as adminIp,
			mg_ip_access as adminIpAccess
		FROM manager
		WHERE mg_login_id = #{adminId} AND mg_login_pwd = #{adminPw}
	</select>
	
	
	<select id="selectMemberList" resultType="com.minwon.vo.MemberVO">
		SELECT * FROM membership_app;
	</select>
	
	<select id="selectMember" resultType="com.minwon.vo.MemberVO">
		SELECT * FROM membership_app
		WHERE u_id=#{u_id}
	</select>
	
	<insert id="insertMember" parameterType="com.minwon.vo.MemberVO">
		INSERT INTO user (u_name, dp_id, ps_id, u_grade, u_login_id, u_login_pwd, u_email, u_admin_num)
		VALUES (#{u_name}, #{dp_id}, #{ps_id}, ${u_grade}, #{u_login_id}, #{u_login_pwd}, #{u_email}, #{u_admin_num})
	</insert>
	
	<insert id="requestMember" parameterType="com.minwon.vo.MemberVO">
		INSERT INTO membership_app (u_name, dp_id, ps_id, u_grade, u_login_id, u_login_pwd, u_email, u_admin_num)
		VALUES (#{u_name}, #{dp_id}, #{ps_id},  #{u_grade}
		, #{u_login_id}, #{u_login_pwd}, #{u_email}, #{u_admin_num})
	</insert>
	
	<delete id="deleteTempMember" parameterType="int">
		DELETE FROM membership_app WHERE u_id=#{id}
	</delete>
	
	<select id="getDpId" resultType="int" parameterType="String">
		SELECT dp_id FROM department where dp_name=#{department}
	</select>
	
	<select id="getPsId" resultType="int" parameterType="String">
		SELECT ps_id FROM position where ps_name=#{position}
	</select>
</mapper>