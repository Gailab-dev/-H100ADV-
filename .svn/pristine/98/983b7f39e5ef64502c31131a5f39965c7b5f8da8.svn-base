package com.minwon.dao.impl;

import java.util.List;

import org.apache.ibatis.session.SqlSession;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

import com.minwon.dao.AdminDAO;
import com.minwon.vo.ComplaintVO;
import com.minwon.vo.IpLogVO;
import com.minwon.vo.SearchVO;

@Repository
public class AdminDAOImpl implements AdminDAO {
	@Autowired
	SqlSession sqlSession;

	@Override
	public List<ComplaintVO> getAllComplaints(SearchVO searchVO) throws Exception {
		return sqlSession.selectList("admin.viewAllComplaints", searchVO);
	}
	
	@Override
	public int getAllComplaintsCnt(SearchVO searchVO) throws Exception {
		return sqlSession.selectOne("admin.viewAllComplaintsCnt", searchVO);
	}

	@Override
	public ComplaintVO getComplaint(int cId) throws Exception {
		return sqlSession.selectOne("admin.viewComplaint",  cId);
	}

	@Override
	public void updateToImsi(int cId) throws Exception {
		sqlSession.update("admin.toImsiComplaint", cId);
	}

	@Override
	public void updateToNonComplete(int cId) throws Exception {
		sqlSession.update("admin.toNonCompleteComplaint", cId);
	}

	@Override
	public void updateToComplete(int cId) throws Exception {
		sqlSession.update("admin.toCompleteComplaint", cId);
	}

	@Override
	public void tempDeleteComplaint(int cId) throws Exception {
		sqlSession.update("admin.tempDeleteComplaint", cId);
	}

	@Override
	public List<ComplaintVO> getTempDeletedComplaints(SearchVO searchVO) throws Exception {
		return sqlSession.selectList("admin.tempDeletedComplaints", searchVO);
	}
	
	@Override
	public int getTempDeletedComplaintsCnt(SearchVO searchVO) throws Exception {
		return sqlSession.selectOne("admin.viewTempDeletedComplaintsCnt", searchVO);
	}

	@Override
	public List<IpLogVO> getIpLogList(SearchVO searchVO) throws Exception {
		return sqlSession.selectList("admin.getIpLogList", searchVO);
	}

	@Override
	public int getIpLogListCnt(SearchVO searchVO) throws Exception {
		return sqlSession.selectOne("admin.getIpLogListCount", searchVO);
	}

	@Override
	public void changePassword(String password) throws Exception {
		sqlSession.update("admin.changePassword", password);
	}

	@Override
	public void initPassword(String password) throws Exception {
		sqlSession.update("admin.initPassword", password);
	}

	@Override
	public void restoreMinwon(int id) throws Exception {
		sqlSession.update("admin.restoreMinwon", id);
	}
}
