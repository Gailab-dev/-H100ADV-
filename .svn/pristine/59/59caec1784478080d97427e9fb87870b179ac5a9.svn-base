<%@page import="com.gpki.gpkiapi.GpkiApi"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.sql.*, java.io.*, java.net.*, java.util.*" %>
<%@ include file="/gpkisecureweb/jsp/gpkisecureweb.jsp" %>


<%@ page import="com.gpki.servlet.GPKIHttpServletResponse" %>
<%@ page import="com.gpki.gpkiapi.exception.GpkiApiException"%>
<%@ page import="java.util.Enumeration"%>
<%@ page import="com.gpki.gpkiapi.cert.*" %>
<%@ page import="com.gpki.gpkiapi.cms.*" %>
<%@ page import="com.gpki.gpkiapi.util.*" %>
<%@ page import="com.dsjdf.jdf.Logger" %>
<%@ page import="java.net.URLDecoder" %>
<%@ page import="java.sql.*"%>
<%	
	/*
	String challenge = gpkiresponse.getChallenge();
	String sessionid = "bb";
	String url = javax.servlet.http.HttpUtils.getRequestURL(request).toString();
	session.setAttribute("currentpage",url);
	*/
	
%>


<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>로그인 페이지</title>
<link type="image/x-icon" rel="shortcut icon"
	href="${path}/resources/images/favicon.ico">
<%@ include file="../include/lib.jsp" %>
<jsp:include page="/gpkisecureweb/jsp/header.jsp"></jsp:include>
<script>
	$(document).ready(function() {
		$('#btnLogin').click(function() {
			var userLoginId = $("#userLoginId").val();
			var userLoginPwd = $("#userLoginPwd").val();
			if (userLoginId == "") {
				alert("아이디를 입력하세요.");
				$("#userLoginId").focus();
				return;
			}
			if (userLoginPwd == "") {
				alert("비밀번호를 입력하세요.");
				$("#userLoginPwd").focus();
				return;
			}
			document.form1.action = "${path}/main/loginCheck.do";
			document.form1.submit();
		});
		
		$('#userLoginPwd').on('keypress', function(e){ 
		    if(e.keyCode == '13'){ 
		        $('#btnLogin').click(); 
		    }
		});
	});
</script>
</head>
<body>

	<div class="login-page">
	<div class="d-flex align-items-start flex-column">
      <div class="login-form">
      <img src="${path}/resources/images/login.png" width="625px"  />
      <div class="">
        <div class="border py-5 px-3 bg-light" style="width: 310px;" >
          
          <form action="/main/certificateLoginCheck.do" method="post" name="popForm" id="popForm">
            <%-- <input type="hidden" name="sessionid" id="sessionid" value="<%=sessionid%>" />
	        <input type="hidden" name="challenge" value="<%=challenge %>" /> --%>
            
             
          	
          	<button type="button" class="btn btn-bule btn-block mb-4" onclick="return Login(this,popForm)">
	            인증서 로그인
	          </button>
	      </form>
	      <form method="post" name="form1" id="form1">
	          
	          <input
	            type="text"
	            class="form-control mb-2 border"
	            id="userLoginId"
	            name="userLoginId"
	            placeholder="아이디"
	          />
	          <input
	            type="password"
	            class="form-control mb-2 border"
	            id="userLoginPwd"
	            name="userLoginPwd"
	            placeholder="비밀번호"
	          />
	          <div class="mb-4 d-flex justify-content-between">
	            <div class="mobile-box ml-4" ></div>
	            <button type="button" class="btn btn-bule" id="btnLogin" name="btnLogin">로그인</button>
	            
	          </div>
          	  
			</form>
	          <div class="mb-2 d-flex justify-content-between">
	            <button type="button" class="btn btn-secondary" onclick="location.href='memberRequest.do'">사용자 신청</button>
	            <button type="button" class="btn btn-secondary" onclick="location.href='findId.do'">
	              아이디 비번 찾기
	            </button>
	          </div>
          
          <c:if test="${msg == 'failure' }">
				<div style="color: red">
					입력하신 정보가 일치하지 않습니다.
				</div>
			  </c:if>
			  <c:if test="${msg == 'logout' }">
				<div style="color: red">
					로그아웃되었습니다.
				</div>
			  </c:if>
			  <!-- 
			  <button type="button" class="btn btn-success"
					onclick="location.href='${path}/resources/GPKISecureWebSetup.exe'">GPKI 다운로드</button>
			   -->
			  
        </div>
        
      </div>
       </div>
    </div>
    </div>
</body>
</html>